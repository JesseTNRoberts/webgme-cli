// DO NOT EDIT THIS FILE
// This file is automatically generated from the webgme-setup-tool.
'use strict';

<% if (typeof seeds === "undefined") seeds = [];
if (typeof addOns === "undefined") addOns = [];
if (typeof plugins === "undefined") plugins = [];
if (typeof visualizers === "undefined") visualizers = [];
if (typeof requirejsPaths === "undefined") requirejsPaths = null;

var dirname = function(path) {
  var pathItems = path.split('/');
  pathItems.pop();
  return pathItems.join('/');
};

var printConfigPaths = function(name, paths) {
  paths = _.uniq(paths);
  var text =  paths.map(function(path) {
    return 'config.'+name+'.basePaths.push(\''+path+'\');'
  }).join('\n');
  return text.length ? text+'\n' : text;
}; %>
var config = require('webgme/config/config.default'),
    validateConfig = require('webgme/config/validator');

<% // FIXME: This needs to be restructured... %>
// The paths can be loaded from the webgme-setup.json
<%= printConfigPaths('plugin', plugins.map(dirname)) +
    printConfigPaths('addOn', addOns.map(dirname)) +
    printConfigPaths('seedProjects', seeds) %>
<% if (addOns.length > 0) { %>config.addOn.enable = true<%}%>
// Visualizer descriptors
<% if (visualizers.length > 0) { %>config.visualization.visualizerDescriptors.push('./src/visualizers/Visualizers.json');<%}%>
// Add requirejs paths
<% if (requirejsPaths) { %>config.requirejsPaths = {
<%= requirejsPaths.map(function(obj) { 
        return '  \''+obj.name+'\': \''+obj.path+'\'';
    }).join(',\n') %>
};<% } %>

validateConfig(config);
module.exports = config;
