/*globals define*/
/*jshint node:true*/

/**
* Generated by WebGME cli for the webgme on <%= new Date() %>.
*/

define(['addon/AddOnBase'], function (AddOnBase) {

    'use strict';
    var <%= addOnID %> = function (Core, storage, gmeConfig, logger, userId) {
        AddOnBase.call(this, Core, storage, gmeConfig, logger, userId);
    };

    // Prototypal inheritance from AddOnBase.
    <%= addOnID %>.prototype = Object.create(AddOnBase.prototype);
    <%= addOnID %>.prototype.constructor = <%= addOnID %>;


    <%= addOnID %>.prototype.getName = function () {
        return '<%= addOnName %>';
    };

    <%= addOnID %>.prototype.update = function (root, callback) {
        this.logger.info('<%= addOnID %>', new Date().getTime(), 'update', this.core.getGuid(root), this.core.getHash(root));
        // Add update logic here!
        // TODO

        callback(null);
    };

    <%= addOnID %>.prototype.query = function (parameters, callback) {
        this.logger.info('<%= addOnID %>', new Date().getTime(), 'query', parameters);
        // Add query logic here!
        // TODO
        callback(null, parameters);
    };

    <%= addOnID %>.prototype.stop = function (callback) {
        var self = this;

        AddOnBase.prototype.stop.call(this, function (err) {
            self.logger.info('<%= addOnID %>', new Date().getTime(), 'stop');
            callback(err);
        });
    };

    //<%= addOnID %>.prototype.start = function (parameters, callback) {
    //    AddOnBase.prototype.start.call(this, parameters, callback);
    //    this.logger.info('<%= addOnID %>', new Date().getTime(), 'start');
    //};

    return <%= addOnID %>;
});
